---
layout: blog
title: "dl.k8s.io 采用内容分发网络（CDN）"
date: 2023-06-09
slug: dl-adopt-cdn
---


**作者**：Arnaud Meukam (VMware), Hannah Aubry (Fast Forward), Frederico Muñoz (SAS Institute)

**译者**：[Xin Li](https://github.com/my-git9) (Daocloud)

我们很高兴地宣布，官方 Kubernetes 二进制文件的主页 dl.k8s.io 很快将由
[Fastly](https://www.fastly.com) 提供支持。

Fastly 以其高性能内容分发网络（CDN）而闻名，
该网络旨在全球范围内快速可靠地分发内容。凭借其强大的网络，Fastly
将帮助我们实现比以往更快、更可靠地向用户分发官方 Kubernetes 二进制文件。

使用 Fastly 是在经过广泛的评估过程后做出的决定，
在该过程中我们仔细评估了几个潜在的内容分发网络提供商。最终，我们选择
Fastly 是因为他们对开放互联网的承诺以及在为一些著名的开源项目（通过他们的
[Fast Forward](https://www.fastly.com/fast-forward)
计划）提供快速和安全的数字体验方面的良好记录。

## 关于本次更改你需要了解的信息

- 7 月 24 日星期一，与 dl.k8s.io 域名关联的 IP 地址和后端存储将发生变化。
- 由于域名将保持不变，因此更改不会影响绝大多数用户。
- 如果你限制对特定 IP 范围的访问，则对 dl.k8s.io 域的访问可能会停止工作。

如果你认为你可能会受到影响或想了解有关此次更改的更多信息，请继续阅读。

## 我们为什么要进行此更改

官方 Kubernetes 二进制文件网站 dl.k8s.io 被全世界成千上万的用户使用，
目前**每月提供超过 5 PB 的二进制文件服务**。本次更改将通过充分利用全球
CDN 来改善对这些资源的访问。

## 这只影响 dl.k8s.io，还是其他域也受到影响？

只有 dl.k8s.io 会受到本次变更的影响。

## 我公司规定了允许我们访问的域名，此更改会影响域名吗？

不，域名（`dl.k8s.io`）将保持不变：无需更改，不会影响对 Kubernetes
发布二进制文件站点的访问。

## 我的公司使用某种形式的 IP 过滤，此更改会影响对站点的访问吗？

如果已经存在基于 IP 的过滤，则当新 IP 地址变为活动状态时，对站点的访问可能会受到影响。

## 如果我的公司不使用 IP 地址来限制网络流量，我们需要做些什么吗？

不，切换到 CDN 的过程应该是透明的。

## 会有双运行期吗？

**不，这是切换。** 但是，你现在可以测试你的网络，检查它们是否可以从 Fastly
路由到新的公共 IP 地址。 你应该在 7 月 24 日之前将新 IP 添加到你网络的 `allowlist`（白名单）中。
切换完成后，确保你的网络使用新的 IP 地址连接到 `dl.k8s.io` 服务。

## 新 IP 地址是什么？

如果你需要管理下载允许列表，你可以从 Fastly API 中获取需要匹配的范围，
JSON 格式地址：[公共 IP 地址范围](https://api.fastly.com/public-ip-list)。

你不需要任何凭据即可下载该范围列表。

## 推荐哪些后续操作？

如果你已经有了基于 IP 的过滤，我们建议你**在 7 月 24 日**之前采取以下行动：

- 将新的 IP 地址添加到你的白名单。
- 对你的网络/防火墙进行测试，以确保你的网络可以路由到新的 IP 地址。

进行更改后，我们建议仔细检查 HTTP 调用是否正在使用新 IP 地址访问 dl.k8s.io。

## 切换后发现异常怎么办？

如果你在二进制文件下载过程中遇到任何异常，
请[提交 Issue](https://github.com/kubernetes/k8s.io/issues/new/choose)。
